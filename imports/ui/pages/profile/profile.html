<template name="profile">
  {{#if currentUser }} {{#isAuthorized}}
  <div class="clearfix">
    <div class="titleContainer" id="wallet-title">
      <span>My Profile</span>
    </div>
    <div class="float-right address-container">
      <div class="address-identicon">{{> dapp_identicon identity=ptiAddress class="dapp-tiny"}}</div>
      <span class="address">This is your address: {{ ptiAddress }}</span>
    </div>
  </div>
  <div class="line"></div>
  <div class="walletContainer">
    <div class="centerIcon">
      <!-- {{> dapp_identicon identity='{{ currentUser.profile.ptiAddress }}' class="dapp-large"}} -->
      {{#if currentUser.profile.image }}
        <span id="avatar" class="dapp-identicon dapp-large" style="background-image: url( {{ currentUser.profile.image }} )"></span>
      {{else}}
        <span id="avatar" class="dapp-identicon dapp-large" style="background-image: url('/img/avatar_img.svg')"></span>
      {{/if}}
    </div>
    <div class="profile-label"> Name:</div>
    <div class="profile-info">{{currentUser.profile.name}} </div>
    <div class="profile-label"> Email:</div>
    <div class="profile-info"> {{userEmail}}</div>
    <!-- Action Buttons -->
    <button class="btn btn-default blue-button btn-block" id="edit-profile">Edit Profile</button>
    <!-- {{#unless hasKeystore}}
          <button class="btn btn-default blue-button" id="restore-keystore">Restore Keystore</button>
        {{/unless}} -->

  </div>
  {{#if ptiAddress }}
    <div class="walletContainer">
      <ul class="titleContainer"></ul>
      <div class="descriptionContainer">
        <div class="navbar">
          <ul class="nav nav-tabs">
            <li class="active">
              <a href="#eth" data-toggle="tab">ETH</a>
            </li>
            <li>
              <a href="#pti" data-toggle="tab">PTI</a>
            </li>
          </ul>
        </div>
        <div class="tab-content ">
          <div class="tab-pane active" id="eth">
            <h3> You own <b>{{ eth_balance }}</b> Ether</h3>
            <button class="btn btn-default blue-button btn-block" id="send-eth">Send Ether</button>
          </div>
          <div class="tab-pane" id="pti">
            <h3> You own <b>{{ pti_balance }}</b> PTI</h3>
            <button class="btn btn-default blue-button btn-block" id="send-pti">Send PTI</button>
          </div>
          <button class="btn btn-default blue-button btn-block" style="margin-top: 5px;" id="transaction-history">Transaction History</button>
          <button class="btn btn-default blue-button btn-block" id="show-seed">Show the seed for this wallet</button>
        </div>
      </div>
    </div>
  {{else}}
    <div class="walletContainer">
      <ul class="titleContainer"></ul>
      <div class="descriptionContainer">
        <p>
        We could not find a wallet stored on this device. If you remember the 12-word seed, you can restore your wallet:
      </p>
        <button class="btn btn-default blue-button" id="restore-keystore">Restore wallet</button>
        <p>
          Otherwise, you can generate a new wallet (but you will not have access to any funds you might have)
        </p>
        <p>
          <button class="btn btn-default blue-button" id="create-wallet">Generate a new wallet</button>
        </p>
      </div>
    </div>
  {{/if}}

  {{/isAuthorized}}

  <table class="table table-striped all_transactions">
    {{#each events}} {{> transaction}} {{/each}}
  </table>

  {{else}}
  <div class="container">
    {{> atForm }}
  </div>
  {{/if}}
</template>



<template name="transaction">
  <tr class="transition_row {{#if sendCheck}} sent {{/if}}">
    <td>
      <div>{{ sender }}</div>
      <div>{{ receiver }}</div>
    </td>
    <td>
      <div>{{ senderBalance }}</div>
      <div>{{ receiverBalance }}</div>
    </td>
    <td>{{ amount }}</td>
    <td>{{ createdAt }}</td>
    <td>{{ description }}</td>
  </tr>
</template>
